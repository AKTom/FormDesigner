<!DOCTYPE html>
<html debug="true">
<head>
    <meta charset="utf-8" />
    <title>不明觉厉的表单设计器</title>
    <link rel="stylesheet" href="css/jquery-ui.min.css" />
    <link rel="stylesheet" href="css/Animates.css" />
    <link rel="stylesheet" type="text/css" href="css/Main.css" />
    <link rel="stylesheet" href="css/Media.css" />
    <link href="css/font-awesome.min.css" rel="stylesheet" />
    <script src="js/Jquery/jquery-1.8.3.min.js" type="text/javascript"></script>
    <script src="js/ControlProperty.js" type="text/javascript"></script>
    <script src="js/BasicControl.js" type="text/javascript"></script>
    <script src="js/Main.js" type="text/javascript"></script>
    <!--http://qinsong.gotoip55.com/FormDesigner/index.html-->
</head>
<body style="position:relative;" onresize="ToolHandle.ChangeFormSize(event)">
    <input type="button" value="获取所有输入框区域" onclick="ToolHandle.GetPanel()" style="display:none;" />
    <div id="Div_Main" onmousemove="ToolHandle.SetDrag_Move(event)" onmouseup="ToolHandle.SetDrag_Up(event)">
        <div id="Div_Tool">
            <div class="Div_ControlGroup"></div><!--这个DIV暂时没用上-->
            <ul id="UL_Tool" class="UL_Tool" category="基础控件">
                <li><span class="ToolItem" id="_Text">单行输入框<i class="ControlIcon fa fa-pencil"></i></span></li>
                <li><span class="ToolItem" id="_Textarea">多行输入框<i class="ControlIcon fa fa-align-left"></i></span></li>
                <li><span class="ToolItem" id="_NumText">数字输入框<i class="ControlIcon fa fa-500px"></i></span></li>
                <li><span class="ToolItem" id="_Combobox">单选框<i class="ControlIcon fa fa-dot-circle-o"></i></span></li>
                <li><span class="ToolItem" id="_DateCombobox">日期<i class="ControlIcon fa fa-calendar"></i></span></li>
                <li><span class="ToolItem" id="_DateComboboxRegion">日期区间<i class="ControlIcon fa fa-calendar-plus-o"></i></span></li>
                <li><span class="ToolItem" id="_Image">图片<i class="ControlIcon fa fa-picture-o"></i></span></li>
                <li><span class="ToolItem" id="_Remark">说明文字<i class="ControlIcon fa fa-font"></i></span></li>
                <li><span class="ToolItem" id="_Detail">明细<i class="ControlIcon fa fa-list-ul"></i></span></li>
                <li><span class="ToolItem ToolItem_IsDisabled" id="input-text">金额[未上线]<i class="ControlIcon fa fa-money"></i></span></li>
                <li><span class="ToolItem ToolItem_IsDisabled" id="_Table">表格[未上线]<i class="ControlIcon fa fa-table"></i></span></li>
            </ul>
            <ul class="UL_Tool" category="布局控件">
                <li><span class="ToolItem" id="_Text">流式布局<i class="ControlIcon fa fa-bars"></i></span></li>
                <li><span class="ToolItem" id="_Text">表格布局<i class="ControlIcon fa fa-table"></i></span></li>
            </ul>
            <div id="TempToolList" style="background:#EEE;height:300px;display:none;">
                <!--
                    <div class="DragDown" onmousedown="ToolHandle.SetDrag_Down(e)"><span class="ui-icon ui-icon-arrowthick-1-s"></span></div>
                    <div class="DragLeft"><span class="ui-icon ui-icon-arrowthick-1-w"></span></div>
                    <div class="DragRight"><span class="ui-icon ui-icon-arrowthick-1-e"></span></div>
                -->
                <!--单行输入框-->
                <div class="BasicControl">
                    <div id="TempTool_Text" class="Div_LineControl Control_Text">
                        <span class="Span_LineControl_title_font">单行输入框</span>
                        <span class="Span_LineControl_tip_font">请输入</span>
                    </div>
                    <div class="txtTipId"></div>
                    <div title="删除" class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)" ontouchstart="javascript:alert(1)"><span class="ui-icon ui-icon-closethick"></span></div>
                </div>
                <!--多行输入框-->
                <div class="BasicControl">
                    <div id="TempTool_Textarea" class="Div_LineControl Control_Textarea" style="height:100px;">
                        <span class="Span_LineControl_title_font">多行输入框</span>
                        <span class="Span_LineControl_tip_font">请输入</span>
                    </div>
                    <!--<div class="DragDown" onmousedown="ToolHandle.SetDrag_Down(event)"><span class="ui-icon ui-icon-arrowthick-1-s"></span></div>-->
                    <div class="txtTipId"></div>
                    <!--<div title="复原" class="btnRecovery" onclick="ToolHandle.RecoveryOfCon(this)"><span class="ui-icon ui-icon-arrowreturnthick-1-s"></span></div>-->
                    <div title="删除" class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="ui-icon ui-icon-closethick"></span></div>
                </div>
                <!--数字输入框-->
                <div class="BasicControl">
                    <div id="TempTool_NumText" class="Div_LineControl Control_Number">
                        <span class="Span_LineControl_title_font">数字输入框</span>
                        <span class="Span_LineControl_tip_font">请输入</span>
                    </div>
                    <div class="txtTipId"></div>
                    <div class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="ui-icon ui-icon-closethick"></span></div>
                </div>
                <!--单选框-->
                <div class="BasicControl">
                    <div id="TempTool_Combobox" class="Div_LineControl Control_Combobox">
                        <span class="Span_LineControl_title_font">单选框</span>
                        <span class="Span_LineControl_tip_font Combobox_Img Font_Right">请选择</span>
                    </div>
                    <div class="txtTipId"></div>
                    <div class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="ui-icon ui-icon-closethick"></span></div>
                </div>
                <!--日期选择-->
                <div class="BasicControl">
                    <div id="TempTool_DateCombobox" class="Div_LineControl Control_DateCombobox">
                        <span class="Span_LineControl_title_font">日期</span>
                        <span class="Span_LineControl_tip_font Combobox_Img Font_Right">请选择</span>
                    </div>
                    <div class="txtTipId"></div>
                    <div class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="ui-icon ui-icon-closethick"></span></div>
                </div>
                <!--日期区间选择-->
                <div class="BasicControl">
                    <div id="TempTool_DateComboboxRegion" class="Div_ControlGroup Control_DateComboboxRegion">
                        <div class="Div_LineControl Control_DateCombobox">
                            <span class="Span_LineControl_title_font">开始日期</span>
                            <span class="Span_LineControl_tip_font Combobox_Img Font_Right">请选择</span>
                        </div>
                        <div class="Div_LineControl Control_DateCombobox">
                            <span class="Span_LineControl_title_font">结束日期</span>
                            <span class="Span_LineControl_tip_font Combobox_Img Font_Right">请选择</span>
                        </div>
                    </div>
                    <div class="txtTipId"></div>
                    <div class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="ui-icon ui-icon-closethick"></span></div>
                </div>
                <!--图片框-->
                <div class="BasicControl">
                    <div id="TempTool_Image" class="Div_LineControl Control_Image">
                        <span class="Span_LineControl_title_font">图片框</span>
                    </div>
                    <div class="txtTipId"></div>
                    <div class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="ui-icon ui-icon-closethick"></span></div>
                </div>
                <!--明细框-->
                <div class="BasicControl">
                    <div id="TempTool_Detail" class="Div_ControlGroup Control_Detail">
                        <span class="Span_ControlGroup_title_font">明细</span>
                        <span class="Span_ControlGroup_adddetail_button">增加明细</span>
                    </div>
                    <div class="txtTipId"></div>
                    <div title="删除" class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="ui-icon ui-icon-closethick"></span></div>
                </div>
                <!--说明框-->
                <div class="BasicControl">
                    <div id="TempTool_Remark" class="Div_LineControl Control_Remark">
                        <span class="Span_LineControl_title_font">说明文字</span>
                    </div>
                    <div class="txtTipId"></div>
                    <div class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="ui-icon ui-icon-closethick"></span></div>
                </div>
                <!--网格-->
                <div class="BasicControl">
                    <div id="TempTool_Table" class="Div_ControlGroup Control_Table Blank_Table">
                        <div class="Div_TableControl">可拖入多个组件（不包含明细组件）</div>
                    </div>
                    <div class="txtTipId"></div>
                    <div class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="ui-icon ui-icon-closethick"></span></div>
                </div>
                <div id="SplitHr"></div>
            </div>
            <!-- 控件模板集合 -->
            <div id="ControlTemplet" style="background:#EEE;height:300px;display:none;">
                <ul type="BPM_PC" class="">
                    <li class="_Text">
                        <div class="row"><div class="col-md-11"><div class="form-group formsbotton"><label class="control-label col-md-3 formsline f-caption">{{Title}}{{IsRequired?<span class="required">*</span>}}</label><div class="col-md-9 f-content"><input type="text" class="form-control" {{Tooltip?jsonobj[i].Tooltip}}{{MaxLength?maxlength="{value}"}}{{Name?name="{value}"}} /><span class="help-block"></span></div></div></div></div>
                    </li>
                </ul>
                <ul type="BPM_Mobile" class="">

                </ul>
            </div>
            <div id="TempEditList" style="background:#EEE;height:300px;display:none;">
                <!--单行文本编辑框-->
                <input index="1" type="text" class="EditBox_TextBox" mytitle="" value="" />
                <!--数字编辑框-->
                <input index="1" type="number" class="EditBox_NumberBox" mytitle="" value="" />
                <!--日期编辑框-->
                <input index="1" type="date" class="EditBox_DateBox" mytitle="" value="" />
                <!--日期+时间框-->
                <input index="1" type="date" class="EditBox_DateTimeBox" mytitle="" value="" />
                <!--多行文本框-->
                <textarea index="1" class="EditBox_DateTimeBox" mytitle=""></textarea>
                <!--下拉选择框-->
                <select index="1" class="EditBox_Combobox" mytitle=""></select>
                <!--单选钮-->
                <div index="1" class="EditBox_RadioButton" mytitle=""></div>
                <!--复选框-->
                <div index="1" class="EditBox_Checkbox" mytitle=""></div>
            </div>
        </div>
        <div id="Div_Phone" style="background:url(css/images/phone-background.png);">
            <div id="Div_Phone_Main"></div>
            <!--<div id="Div_DeleteControl" style="display:none;"><span class="Span_DeleteControl_Text">拖拽至此删除</span></div>
            <div id="Div_SaveAsControl" style="display:none;"><span class="Span_SaveAsControl_Text">拖拽至此暂存</span></div>-->
        </div>
        <div id="Div_ControlProperty">
            <div class="div_TabPanel div_PropertyPanel">
                <div class="div_LittleTitle"><i class="fa fa-tv"></i><label>外观</label></div>
                <div class="div_PropertyName">高度<i class="Span_RedStar">*</i></div>
                <div class="div_PropertyValue" unit="px">
                    <input name="height" type="number" class="Text_Singer" mytitle="请输入控件高度（必填）" value="" />
                </div>
                <input type="button" value="设置为默认" /><input id="btnSave" type="button" value="导出Json" />
            </div>
            <div class="div_TabPanel div_TaskPanel">

            </div>
            <div class="div_TabPanel div_ElsePanel">

            </div>
            <!--<table id="Table_ControlProperty" cellpadding="0" cellspacing="0">
                <thead>
                    <tr>
                        <th colspan="2"><input type="button" value="设置为默认" /><input id="btnSave" type="button" value="导出Json" /></th>
                    </tr>
                </thead>
                <tbody>
                    <tr><th colspan="2" class="Tr_GroupTr">界面</th></tr>
                    <tr><th>高度<span class="Span_RedStar">*</span></th></tr>
                    <tr><td><input name="height" type="number" class="Text_Singer_Num" mytitle="请输入控件高度（必填）" value="100" /><span class="Span_Digit">px</span><span class="Text_MinusNum"></span><span class="Text_AddNum"></span></td></tr>
                    <tr><th>标题<span class="Span_RedStar">*</span></th><td><input type="text" class="Text_Singer" mytitle="请输入标题（必填）" value="多行输入框" /></td></tr>
                    <tr><th>提示文字</th><td><input type="text" class="Text_Singer" mytitle="请输入提示文字" value="请输入" /></td></tr>
                    <tr><th colspan="2" class="Tr_GroupTr">功能</th></tr>
                    <tr><th>字数限制</th><td><input type="number" class="Text_Singer_Num" mytitle="请输入最长文字长度（必填）" value="100" /><span class="Span_Digit">px</span><span class="Text_MinusNum"></span><span class="Text_AddNum"></span></td></tr>
                </tbody>
            </table>-->
        </div>
    </div>
    <div id="Div_ToolTip">AAA</div>


    <!--<script src="js/jquery-ui.min.js" type="text/javascript"></script>-->
    <script src="js/Jquery/jquery-ui.min.js"></script>
    <script src="js/Jquery/jquery.ui.touch-punch.js" type="text/javascript"></script>
    <script src="js/FileSaver/Blob.js" type="text/javascript"></script>
    <script src="js/FileSaver/FileSaver.js" type="text/javascript"></script>
    <script src="js/ExportForm.js" type="text/javascript"></script>
    <script type="text/javascript">
        (function () {
            document.getElementById("btnSave").onclick = function (event) {
                event.preventDefault();
                var BB = self.Blob;
                saveAs(new BB(
                          ["\ufeff" + JSON.stringify(ToolHandle.ExportJson())] //\ufeff防止utf8 bom防止中文乱码
                        , { type: "text/plain;charset=utf8" }
                    ), "PageTemplet.json"
                );
            };
        })();

        $(".DragDown").live("touchstart", function (event) {
            event.preventDefault();
            ToolHandle.SetDrag_Down(event);
        });
        $("[mytitle]").live("touchstart", function (event) {
            $("#Div_ToolTip").hide();
        });
        document.addEventListener('touchmove', function (event) {
            if (IsChangeSize) {
                event.preventDefault();
                // 如果这个元素的位置内只有一个手指的话
                if (event.targetTouches.length == 1) {
                    ToolHandle.SetDrag_Move(event);
                }
            }
        }, false);
        document.addEventListener('touchend', function (event) {
            if (IsChangeSize) {
                event.preventDefault();
                ToolHandle.SetDrag_Up(event);
            }
        }, false);

        var _mecon = null;
        $(".Div_LineControl").live("touchstart", function (event) {
            if (!_mecon) {
                _mecon = this;
                setTimeout(function () { _mecon = null }, "500");
            } else {
                if (_mecon == this) {
                    ToolControl.MouseDoubleClick(event);
                } else {
                    _mecon = this; setTimeout();
                    setTimeout(function () { _mecon = null }, "500");
                }
            }
        });
    </script>
</body>

</html>
